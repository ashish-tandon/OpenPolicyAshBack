# OpenPolicy Deployment Configuration
# This file contains all configuration variables for the automated deployment pipeline

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================

# Project details
PROJECT_NAME="OpenPolicyAshBack"
PROJECT_VERSION="1.0.0"
PROJECT_DESCRIPTION="Parliamentary Data Processing and Policy Analysis System"

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker Hub configuration
DOCKER_IMAGE_NAME="ashishtandon9/openpolicyashback"
DOCKER_REGISTRY="docker.io"
DOCKER_BUILD_PLATFORMS="linux/amd64,linux/arm64"
DOCKER_BUILD_CONTEXT="."
DOCKERFILE_PATH="Dockerfile.api"

# Docker Compose configuration
DOCKER_COMPOSE_FILE="docker-compose.single.yml"
DOCKER_COMPOSE_PROJECT_NAME="openpolicy"

# =============================================================================
# GITHUB CONFIGURATION
# =============================================================================

# GitHub repository details
GITHUB_REPO="ashishtandon/OpenPolicyAshBack"
GITHUB_BRANCH="main"
GITHUB_REMOTE="origin"

# Git configuration
GIT_USER_NAME="OpenPolicy Bot"
GIT_USER_EMAIL="deploy@openpolicy.com"

# =============================================================================
# QNAP CONFIGURATION
# =============================================================================

# QNAP server details
QNAP_HOST="ashishsnas.myqnapcloud.com"
QNAP_PORT="22"
QNAP_USER="admin"
QNAP_SSH_KEY_PATH="~/.ssh/id_rsa"

# QNAP Container Station configuration
QNAP_CONTAINER_NAME="openpolicy_single"
QNAP_CONTAINER_PORT="8000"
QNAP_DATA_VOLUME="/share/Container/openpolicy"
QNAP_RESTART_POLICY="unless-stopped"

# =============================================================================
# AZURE CONFIGURATION
# =============================================================================

# Azure resource details
AZURE_SUBSCRIPTION_ID=""
AZURE_RESOURCE_GROUP="openpolicy-rg"
AZURE_LOCATION="eastus"

# Azure Container Registry
AZURE_ACR_NAME="openpolicyacr"
AZURE_ACR_SKU="Basic"
AZURE_ACR_ADMIN_ENABLED="true"

# Azure Container Apps
AZURE_CONTAINER_APP_NAME="openpolicy-api"
AZURE_CONTAINER_APP_ENV="openpolicy-env"
AZURE_CONTAINER_APP_TARGET_PORT="8000"
AZURE_CONTAINER_APP_INGRESS="external"
AZURE_CONTAINER_APP_CPU="1"
AZURE_CONTAINER_APP_MEMORY="2Gi"
AZURE_CONTAINER_APP_MIN_REPLICAS="1"
AZURE_CONTAINER_APP_MAX_REPLICAS="3"

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application ports
APP_PORT="8000"
APP_HEALTH_ENDPOINT="/health"
APP_API_ENDPOINT="/api"

# Environment variables
APP_DATABASE_URL="sqlite:///./openpolicy.db"
APP_REDIS_URL="redis://localhost:6379/0"
APP_CORS_ORIGINS="https://openpolicy-api.azurecontainerapps.io"
APP_NODE_ENV="production"
APP_LOG_LEVEL="INFO"

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment settings
DEPLOYMENT_TIMEOUT="300"
HEALTH_CHECK_TIMEOUT="30"
HEALTH_CHECK_RETRIES="3"
HEALTH_CHECK_INTERVAL="5"

# Rollback configuration
ROLLBACK_ENABLED="true"
ROLLBACK_TIMEOUT="60"
MAX_ROLLBACK_VERSIONS="5"

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health check endpoints
HEALTH_CHECK_URLS="http://localhost:8000/health,http://localhost:8000/api/health"

# Monitoring thresholds
CPU_THRESHOLD="80"
MEMORY_THRESHOLD="80"
DISK_THRESHOLD="90"
RESPONSE_TIME_THRESHOLD="5000"

# Alert configuration
ALERT_EMAIL="admin@openpolicy.com"
ALERT_WEBHOOK=""

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Security settings
SECURITY_SCAN_ENABLED="true"
VULNERABILITY_SCAN_ENABLED="true"
SECRET_SCAN_ENABLED="true"

# SSL/TLS configuration
SSL_ENABLED="true"
SSL_CERT_PATH=""
SSL_KEY_PATH=""

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup settings
BACKUP_ENABLED="true"
BACKUP_RETENTION_DAYS="30"
BACKUP_PATH="/backup"

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging settings
LOG_LEVEL="INFO"
LOG_FORMAT="json"
LOG_FILE="/var/log/openpolicy/deployment.log"
LOG_RETENTION_DAYS="90"

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Testing settings
TEST_ENABLED="true"
TEST_TIMEOUT="300"
TEST_PARALLEL="false"

# Test endpoints
TEST_ENDPOINTS="/health,/api/health,/api/stats,/api/jurisdictions"

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Notification settings
NOTIFICATION_ENABLED="true"
NOTIFICATION_CHANNELS="email,slack"

# Email configuration
EMAIL_SMTP_SERVER="smtp.gmail.com"
EMAIL_SMTP_PORT="587"
EMAIL_FROM="deploy@openpolicy.com"
EMAIL_TO="admin@openpolicy.com"

# Slack configuration
SLACK_WEBHOOK_URL=""
SLACK_CHANNEL="#deployments"

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Advanced settings
DRY_RUN_ENABLED="false"
VERBOSE_LOGGING="false"
DEBUG_MODE="false"
PARALLEL_DEPLOYMENT="false"

# Resource limits
MAX_CONCURRENT_DEPLOYMENTS="3"
DEPLOYMENT_MEMORY_LIMIT="2Gi"
DEPLOYMENT_CPU_LIMIT="1"

# Network configuration
NETWORK_TIMEOUT="30"
CONNECTION_RETRIES="3"
CONNECTION_TIMEOUT="10" 